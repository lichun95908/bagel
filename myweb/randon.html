<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰“æ•£èˆ‡æŠ½å–</title>
    <style>
        /* --- CSS æ ¸å¿ƒä¿®è¨‚ï¼šéš±è—è¼¸å…¥æ¡†ç®­é ­ --- */
        /* é‡å° Chrome, Safari, Edge, Opera */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* é‡å° Firefox */
        input[type=number] {
            -moz-appearance: textfield;
        }
        /* ---------------------------------- */


        /* --- é é¢æ•´é«”é¢¨æ ¼ (æ²¿ç”¨æ‚¨çš„è¨­å®š) --- */
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #03d5e4; 
            font-family: "Microsoft JhengHei", "Noto Sans TC", sans-serif;
            color: #555;
        }

        /* --- å¡ç‰‡ä¸»é«”è¨­è¨ˆ --- */
        .card {
            background: rgb(255, 255, 255);
            width: 500px; 
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
            text-align: center;
            position: relative;
        }

        /* --- æ¨™é¡Œå€åŸŸ --- */
        .header {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
        }

        .icon-box {
            background-color: #ff0000;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
            font-size: 18px;
        }

        h2 {
            margin: 0;
            font-size: 24px;
            color: #333;
        }

        .description {
            font-size: 14px;
            color: #888;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        /* è¼¸å…¥ç¾¤çµ„æ¨£å¼ */
        .input-group {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background-color: #FAFAFA;
            border: 2px dashed #EEE;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        /* æ•¸å­—è¼¸å…¥æ¡†æ¨£å¼ */
        #max-num {
            padding: 8px 10px;
            border: 1px solid #CCC;
            border-radius: 6px;
            font-size: 16px;
            text-align: right;
            max-width: 100px;
            margin-left: 10px;
        }
        
        /* --- é¡¯ç¤ºæ•¸å­—çš„å€åŸŸ --- */
        .display-area {
            background-color: #FAFAFA;
            border: 2px dashed #EEE;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            text-align: left;
            font-size: 16px;
            letter-spacing: 2px;
            word-wrap: break-word; 
            color: #666;
            display: flex;
            align-items: flex-start;
            min-height: 60px;
        }

        /* æŠ½ççµæœç‰¹åˆ¥æ¨£å¼ */
        #lucky-draw-area {
            background: #ffe6cc; 
            border: 2px solid #ff9933;
            margin-top: 30px;
            padding: 20px 15px;
            margin-bottom: 30px;
        }

        .label {
            font-weight: bold;
            color: #8B7D6B;
            margin-right: 15px;
            min-width: 70px;
        }

        .numbers {
            flex-grow: 1; 
            font-size: 18px;
            color: #999; 
            line-height: 1.6;
        }
        
        /* æŠ½çè™Ÿç¢¼æ”¾å¤§åŠ ç²— */
        #lucky-draw-nums {
            color: #ff0000; 
            font-weight: 900;
            font-size: 28px;
            letter-spacing: 10px;
        }

        /* æ‰“æ•£å‰/æ‰“æ•£å¾Œæ•¸å­—é¡è‰² */
        #origin-nums, #result-nums {
            font-weight: normal;
            color: #555;
            font-size: 16px;
        }

        /* --- æŒ‰éˆ•é€šç”¨åŸºç¤æ¨£å¼ --- */
        .action-btn {
            border: none;
            padding: 12px 40px;
            border-radius: 50px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            margin: 10px 10px 0 10px; /* çµ¦äºˆé–“è· */
            display: inline-flex;
            align-items: center;
            text-decoration: none; /* ç§»é™¤è¶…é€£çµåº•ç·š */
            line-height: 1; /* ç¢ºä¿æ–‡å­—å±…ä¸­ */
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
        }

        .action-btn:active {
            transform: translateY(1px);
        }

        .btn-icon {
            margin-right: 8px;
            font-size: 18px;
        }

        /* --- 1. æ´—ç‰ŒæŒ‰éˆ• (æ©˜è‰²æ¼¸å±¤) --- */
        .btn-shuffle {
            background: linear-gradient(to right, #FFC075, #FF8C42);
            box-shadow: 0 4px 15px rgba(255, 140, 66, 0.4);
        }

        .btn-shuffle:hover {
            box-shadow: 0 6px 20px rgba(255, 140, 66, 0.5);
        }

        /* --- 2. å›é¦–é æŒ‰éˆ• (è—è‰²æ¼¸å±¤) --- */
        .btn-back {
            background: linear-gradient(to right, #61A3FF, #007bff);
            box-shadow: 0 4px 15px rgba(0, 123, 255, 0.4);
        }

        .btn-back:hover {
            box-shadow: 0 6px 20px rgba(0, 123, 255, 0.5);
        }

        /* --- åº•éƒ¨å°å­— --- */
        .footer-note {
            margin-top: 20px;
            font-size: 12px;
            color: #AAA;
        }
        
        /* --- ç°¡å–®çš„å‹•ç•«æ•ˆæœ Class --- */
        .pop-anim {
            animation: pop 0.3s ease-out;
        }

        @keyframes pop {
            0% { transform: scale(0.9); opacity: 0.5; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div class="card">
        <div class="header">
            <div class="icon-box">ğŸ”ƒ</div> <h2>æ•¸å­—æ´—ç‰Œèˆ‡å…­ä½æ•¸æŠ½å–</h2>
        </div>
        
        <p class="description">
            è«‹è¼¸å…¥æœ€å¤§å€¼ N (N å¿…é ˆ â‰¥ 6)ï¼Œç¨‹å¼å°‡é€²è¡Œæ´—ç‰Œï¼Œä¸¦å¾ä¸­éš¨æ©ŸæŠ½å– 6 å€‹ä¸é‡è¤‡çš„è™Ÿç¢¼ã€‚
        </p>
        
        <div class="input-group">
            <span class="label">è¼¸å…¥æœ€å¤§å€¼ N:</span>
            <input type="number" id="max-num" value="49" min="6" max="100">
        </div>

        <div>
            <button class="action-btn btn-shuffle" onclick="startShuffle()">
                <span class="btn-icon">ğŸ²</span> é–‹å§‹æ´—ç‰Œä¸¦æŠ½å–
            </button>
        </div>
        
        <div class="display-area" style="margin-top: 25px;">
            <span class="label">æ‰“æ•£å‰æ’åº :</span>
            <span class="numbers" id="origin-nums">è«‹è¼¸å…¥ N å¾Œé»æ“ŠæŒ‰éˆ•</span>
        </div>

        <div class="display-area">
            <span class="label">æ‰“æ•£å¾Œæ’åº :</span>
            <span class="numbers" id="result-nums">? ? ? ? ...</span>
        </div>

        <div class="display-area" id="lucky-draw-area">
            <span class="label">éš¨æ©ŸæŠ½ä¸­è™Ÿç¢¼ :</span>
            <span class="numbers" id="lucky-draw-nums">? ? ? ? ? ?</span>
        </div>

        <div class="footer-note">
            Fisher-Yates æ´—ç‰Œæ³•ä¿è­‰äº†æ´—ç‰Œçš„å…¬å¹³æ€§ã€‚
        </div>
        
        <div>
            <a href="index.html" class="action-btn btn-back">
                <span class="btn-icon">ğŸ </span> å›é¦–é 
            </a>
        </div>
    </div>

    <script>
        // è¨­å®šæŠ½å–æ•¸å­—çš„æ•¸é‡
        const DRAW_COUNT = 6;
        
        // é é¢è¼‰å…¥æ™‚åˆå§‹åŒ–é¡¯ç¤º
        document.addEventListener('DOMContentLoaded', (event) => {
            const defaultN = parseInt(document.getElementById("max-num").value);
            // åˆå§‹åŒ– "æ‰“æ•£å‰" å€å¡Šçš„åºåˆ—
            generateSequence(defaultN, "origin-nums");
        });

        // å‡½æ•¸ï¼šå°‡ 1 åˆ° N çš„åºåˆ—è½‰æ›ç‚ºå­—ä¸²é¡¯ç¤º
        function generateSequence(N, elementId) {
            let s_origin = "";
            for (let i = 1; i <= N; i++) {
                s_origin += i + " ";
            }
            document.getElementById(elementId).innerText = s_origin.trim();
        }
        
        // å‡½æ•¸ï¼šå°‡é™£åˆ—è½‰æ›ç‚ºå­—ä¸²é¡¯ç¤º (ç”¨æ–¼æŠ½ä¸­è™Ÿç¢¼å’Œæ‰“æ•£å¾Œåºåˆ—)
        function arrayToString(arr, count) {
            let s = "";
            const limit = count || arr.length;
            for (let i = 0; i < limit; i++) {
                s += arr[i] + " ";
            }
            return s.trim();
        }

        function startShuffle() {
            // 1. å–å¾—ä½¿ç”¨è€…è¼¸å…¥çš„æ•¸å­— N
            const N_input = document.getElementById("max-num").value;
            const N = parseInt(N_input);

            // æª¢æŸ¥è¼¸å…¥æ˜¯å¦æœ‰æ•ˆï¼Œä¸” N å¿…é ˆå¤§æ–¼ç­‰æ–¼ 6
            if (isNaN(N) || N < DRAW_COUNT || N > 100) {
                alert(`è«‹è¼¸å…¥ä¸€å€‹å¤§æ–¼æˆ–ç­‰æ–¼ ${DRAW_COUNT} ä¸”å°æ–¼ 100 çš„æœ‰æ•ˆæ•´æ•¸ Nï¼`);
                return;
            }

            // 2. åˆå§‹åŒ–é™£åˆ— (å¾ 1 åˆ° N)
            let a = [];
            for (let i = 0; i < N; i++) {
                a[i] = i + 1;
            }
            // å–å¾—æ‰“æ•£å‰åºåˆ—å­—ä¸²
            const originString = arrayToString(a);

            // **æ­¥é©Ÿï¼š** æ›´æ–°ã€Œæ‰“æ•£å‰ã€çš„æ•¸å­—é¡¯ç¤º
            document.getElementById("origin-nums").innerText = originString;
            
            // 3. æ ¸å¿ƒæ¼”ç®—æ³•ï¼šFisher-Yates Shuffle 
            const arrayLength = a.length;
            
            for (let i = 0; i < arrayLength - 1; i++) {
                
                // ç”¢ç”Ÿéš¨æ©Ÿæ•¸ r: ç¯„åœæ˜¯ 0 åˆ° arrayLength - 1 - i ä¹‹é–“
                let r = Math.floor(Math.random() * (arrayLength - i));
                
                // å‹•æ…‹æ±ºå®šè¦äº¤æ›çš„ç›®æ¨™ç´¢å¼•
                let swapIndex = arrayLength - 1 - i;
                
                // äº¤æ›é‚è¼¯ 
                let c = a[swapIndex];    
                a[swapIndex] = a[r];      
                a[r] = c;                 
            }
            // å–å¾—æ‰“æ•£å¾Œåºåˆ—å­—ä¸²
            const shuffledString = arrayToString(a);

            // 4. æŠ½å–çµæœ
            const luckyNumbers = a.slice(0, DRAW_COUNT); 
            const resultString = arrayToString(luckyNumbers); // å–å¾—æŠ½ä¸­è™Ÿç¢¼çš„å­—ä¸²è¡¨ç¤º

            // 5. æ›´æ–°ç•«é¢ä¸¦æ’­æ”¾å‹•ç•«
            
            // æ›´æ–°ã€Œæ‰“æ•£å¾Œã€ï¼ˆå®Œæ•´åºåˆ—ï¼‰
            let resultElement = document.getElementById("result-nums");
            resultElement.innerText = shuffledString;

            // **Alert 1: åˆä½µé¡¯ç¤ºæ‰“æ•£å‰èˆ‡æ‰“æ•£å¾Œ**
            alert(
                `--- çµæœ ---\n\n` +
                `ã€æ‰“æ•£å‰æ’åºã€‘ \n` +
                `${originString}\n\n` +
                `ã€æ‰“æ•£å¾Œæ’åºã€‘ \n` +
                `${shuffledString}`
            );
            
            // æ›´æ–°ã€ŒæŠ½ä¸­è™Ÿç¢¼ã€
            let drawElement = document.getElementById("lucky-draw-nums");
            
            // ç§»é™¤å‹•ç•« class å†åŠ å›å»ï¼Œç¢ºä¿æ¯æ¬¡éƒ½èƒ½è§¸ç™¼å‹•ç•«
            drawElement.classList.remove("pop-anim");
            void drawElement.offsetWidth; 
            
            // å°‡æŠ½å–å‡ºçš„ 6 å€‹æ•¸å­—é¡¯ç¤ºå‡ºä¾†
            drawElement.innerText = resultString;
            drawElement.classList.add("pop-anim");

            // **Alert 2: éš¨æ©ŸæŠ½ä¸­è™Ÿç¢¼ (æœ€çµ‚çµæœ)**
            alert(`--- éš¨æ©ŸæŠ½ä¸­è™Ÿç¢¼ ---\n\næ­å–œæ‚¨ï¼è™Ÿç¢¼æ˜¯ï¼š\n\n${resultString}`);
        }
    </script>
</body>
</html>